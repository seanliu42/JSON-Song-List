<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="songlist.json"></script>
    <title>JSON Song List</title>
</head>
<body>

    <div id="part4">
        <h1><b>Find Songs By Genre</b></h1>
        <form>
            <select name="genre" id="genre">
                <option value =""></option>
                <option value="Hip-Hop">Hip-Hop</option>
                <option value="Rap">Rap</option>
                <option value="RNB">RNB</option>
                <option value="Soul">Soul</option>
                <option value="Jazz">Jazz</option>
                <option value="EDM">EDM</option>
                <option value="Pop">Pop</option>
            </select>
            <input type="button" id="button" value="Filter" onclick="printSearch()">
        </form>
        <p id="filteredSongs"></p>
    </div>

    <div id="part3">
        <h1 id="title"><b>All Songs</b></h1>
        <p id="displaySongs"></div>
    </div>

    <div id="part2">
        <h1><b>Serialized Data</b></h1>
        <p id="allSongs"></div>
    </div>  

    <script>
        // Concatenates all the info from the JSON array into a string thats formatted for readability
        function getInfo(array) {
            for (i = 0; i < 10; i++) {
                output += array[i].title + "<br>";
                output += "Artist: " + array[i].artist + "<br>";
                output += "Genre: " + array[i].genre + "<br>";
                output += "Released: " + array[i].release + "<br><br>";
            }
        }

        // Prints the string formatted in getInfo to the webpage
        function print(songs) {
            output = "";
            getInfo(songs);
            document.getElementById("displaySongs").innerHTML = output;
        }

        // Finds the songs in the JSON array that match the desired genre then concatenates them into a string formatted for readability
        function checkGenre(array, desiredGenre) {
            for(i = 0; i < 10; i++) {
                if(array[i].genre[0] == desiredGenre || array[i].genre[1] == desiredGenre) {
                    output += array[i].title + "<br>";
                    output += ("Artists: " + array[i].artist + "<br>");
                    output += ("Genre: " + array[i].genre + "<br>");
                    output += ("Release Year: " + array[i].release + "<br><br>");
                }
            }
        }

        // Ensures that a valid genre has been selected in the form then prints the string formatted in checkGenre to the webpage
        function printSearch() {
            desiredGenre = document.getElementById("genre").value;
            output = "";
            if (desiredGenre != "") {
                checkGenre(songs,desiredGenre);
            }
            document.getElementById("filteredSongs").innerHTML = output;
        }

        // Part 2 of the assignment
        strSongs = JSON.stringify(songs);
        document.getElementById("allSongs").innerHTML = strSongs;

        // Part 3 of the assignment
        print(songs);

        // Part 4 is executed when the form is submitted

    </script>
    </body>

</html>